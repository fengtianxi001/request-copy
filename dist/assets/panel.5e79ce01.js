import"./modulepreload-polyfill.c7c6310f.js";import{o as p,c as m,a as d,d as L,b as k,e as a,w as c,u as i,B as b,I as O,f as v,R as C,g as $,r as F,h as q,i as A,v as R,j as U,t as E,M as j,F as V,k as B,l as H,m as N,n as S}from"./vendor.94c89d46.js";const y=(l,s)=>{const n=l.__vccOpts||l;for(const[r,t]of s)n[r]=t;return n},T={},D={class:"layout-brand"};function z(l,s){return p(),m("div",D,[...s[0]||(s[0]=[d("div",{class:"layout-brand-logo"},"R",-1),d("div",{class:"layout-brand-info"},[d("div",{class:"layout-brand-title"},"Request Copy"),d("div",{class:"layout-brand-version"},"v1.0.0")],-1)])])}const P=y(T,[["render",z],["__scopeId","data-v-718df925"]]);const J={class:"request-filters"},M={class:"request-filters-list"},X={class:"request-filters-input"},G=L({__name:"RequestFilters",props:{filters:Object},emits:["update:filters","clear"],setup(l,{emit:s}){const n=l,r=s,t=k({get:()=>n.filters,set:u=>r("update:filters",u)});return(u,e)=>(p(),m("div",J,[d("div",M,[a(i(b),{size:"mini",onClick:e[0]||(e[0]=o=>r("clear"))},{default:c(()=>[...e[3]||(e[3]=[v("\u6E05\u7A7A\u6240\u6709",-1)])]),_:1}),a(i($),{modelValue:t.value.type,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.type=o),type:"button",size:"mini"},{default:c(()=>[a(i(C),{value:"all"},{default:c(()=>[...e[4]||(e[4]=[v("All",-1)])]),_:1}),a(i(C),{value:"xhr"},{default:c(()=>[...e[5]||(e[5]=[v("XHR",-1)])]),_:1}),a(i(C),{value:"static"},{default:c(()=>[...e[6]||(e[6]=[v("\u9759\u6001\u8D44\u6E90",-1)])]),_:1})]),_:1},8,["modelValue"])]),d("div",X,[a(i(O),{modelValue:t.value.url,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.url=o),size:"mini",placeholder:"\u8DEF\u5F84\u8FC7\u6EE4","allow-clear":""},null,8,["modelValue"])])]))}}),W=y(G,[["__scopeId","data-v-028b08ce"]]);const K={class:"request-item"},Q={class:"request-item-header"},Y={class:"request-item-url"},Z={class:"request-item-body"},ee={__name:"RequestItem",props:{item:Object},setup(l){const s=l,n=F({expand:!1}),r={onToggleExpand(){n.expand=!n.expand},onFormatUrl(t){const u=new URL(t);return console.log("_url",u),u.pathname},onCopy(){const t=document.createElement("textarea");t.value=JSON.stringify(s.item,null,2),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),j.success("\u590D\u5236\u6210\u529F")}};return(t,u)=>(p(),m("div",K,[d("div",Q,[a(i(b),{size:"mini",onClick:r.onToggleExpand},{icon:c(()=>[q(a(i(A),null,null,512),[[R,!n.expand]]),q(a(i(U),null,null,512),[[R,n.expand]])]),_:1},8,["onClick"]),d("div",Y,E(r.onFormatUrl(l.item.url)),1),a(i(b),{size:"mini",type:"primary",onClick:r.onCopy},{default:c(()=>[...u[0]||(u[0]=[v("\u590D\u5236",-1)])]),_:1},8,["onClick"])]),q(d("div",Z,[d("pre",null,E(JSON.stringify(l.item,null,2)),1)],512),[[R,n.expand]])]))}},te=y(ee,[["__scopeId","data-v-d2fed066"]]);const se={class:"request-list"},ne={__name:"RequestList",props:{list:Object},setup(l){return(s,n)=>(p(),m("div",se,[(p(!0),m(V,null,B(l.list,r=>(p(),H(te,{item:r},null,8,["item"]))),256))]))}},oe=y(ne,[["__scopeId","data-v-2367bf17"]]);const ae={class:"layout"},le={__name:"App",setup(l){const s=F({url:"",type:"all"}),n=N([]),r=k(()=>{let e=[...n.value];return s.type!=="all"&&(e=e.filter(o=>o.type===s.type)),e.filter(o=>o.url.includes(s.url))}),t={onClear(){n.value=[]},onAddListener(){chrome.devtools.network.onRequestFinished.addListener(e=>{e.request.method.toUpperCase()!=="OPTIONS"&&e.getContent(o=>{var w;const x=u.parseHandler(o),h=u.parseHandler(((w=e.request.postData)==null?void 0:w.text)||""),f={};e.request.headers.forEach(I=>{f[I.name]=I.value});const _=u.typeHandler(e),g={url:e.request.url,method:e.request.method,headers:f,payload:h,response:x,type:_};n.value.unshift(g)})})}},u={typeHandler(e){var f;const o=e.request.url.split("?")[0].toLowerCase();if([".png",".jpg",".jpeg",".gif",".webp",".svg",".mp4",".mp3",".wav",".js",".css",".html",".htm",".ico",".woff",".woff2",".ttf",".eot"].some(_=>o.endsWith(_)))return"static";const h=e.request.headers.reduce((_,g)=>(_[g.name.toLowerCase()]=g.value,_),{});return((f=h["content-type"])==null?void 0:f.includes("application/json"))||h["x-requested-with"]==="XMLHttpRequest"||["POST","PUT","PATCH"].includes(e.request.method.toUpperCase()),"xhr"},parseHandler(e){if(!e)return"";try{return JSON.parse(e)}catch{return e}}};return t.onAddListener(),(e,o)=>(p(),m("div",ae,[a(P),a(W,{filters:s,"onUpdate:filters":o[0]||(o[0]=x=>s=x),onClear:t.onClear},null,8,["filters","onClear"]),a(oe,{list:r.value},null,8,["list"])]))}},re=y(le,[["__scopeId","data-v-023f15f4"]]);const ue=S(re);ue.mount("#app");
