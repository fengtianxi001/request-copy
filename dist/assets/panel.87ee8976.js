import"./modulepreload-polyfill.c7c6310f.js";import{o as p,c as m,a as d,d as L,b as U,e as s,w as c,u,B as R,I as A,f,g as I,R as b,h as D,r as F,i as q,v as C,j as O,t as E,M as $,E as j,F as B,k as V,l as H,m as T,n as N}from"./vendor.8dca7db7.js";const y=(r,n)=>{const o=r.__vccOpts||r;for(const[i,t]of n)o[i]=t;return o},S={},z={class:"layout-brand"};function P(r,n){return p(),m("div",z,[...n[0]||(n[0]=[d("div",{class:"layout-brand-logo"},"R",-1),d("div",{class:"layout-brand-info"},[d("div",{class:"layout-brand-title"},"Request Copy"),d("div",{class:"layout-brand-version"},"v1.0.0")],-1)])])}const J=y(S,[["render",P],["__scopeId","data-v-4ec73b30"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestBrand.vue"]]);const M={class:"request-filters"},X={class:"request-filters-list"},G={class:"request-filters-input"},W=L({__name:"RequestFilters",props:{filters:Object},emits:["update:filters","clear"],setup(r,{emit:n}){const o=r,i=n,t=U({get:()=>o.filters,set:a=>i("update:filters",a)});return(a,e)=>(p(),m("div",M,[d("div",X,[s(u(R),{size:"mini",onClick:e[0]||(e[0]=l=>i("clear"))},{default:c(()=>[...e[3]||(e[3]=[f("\u6E05\u7A7A\u6240\u6709",-1)])]),_:1}),s(u(R),{size:"mini",onClick:a.methods.onToggleExpand},{icon:c(()=>[s(u(I))]),_:1},8,["onClick"]),s(u(D),{modelValue:t.value.type,"onUpdate:modelValue":e[1]||(e[1]=l=>t.value.type=l),type:"button",size:"mini"},{default:c(()=>[s(u(b),{value:"all"},{default:c(()=>[...e[4]||(e[4]=[f("All",-1)])]),_:1}),s(u(b),{value:"xhr"},{default:c(()=>[...e[5]||(e[5]=[f("XHR",-1)])]),_:1}),s(u(b),{value:"static"},{default:c(()=>[...e[6]||(e[6]=[f("\u9759\u6001\u8D44\u6E90",-1)])]),_:1})]),_:1},8,["modelValue"])]),d("div",G,[s(u(A),{modelValue:t.value.url,"onUpdate:modelValue":e[2]||(e[2]=l=>t.value.url=l),size:"mini",placeholder:"\u8DEF\u5F84\u8FC7\u6EE4","allow-clear":""},null,8,["modelValue"])])]))}}),K=y(W,[["__scopeId","data-v-56e8929c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestFilters.vue"]]);const Q={class:"request-item"},Y={class:"request-item-header"},Z={class:"request-item-url"},ee={class:"request-item-body"},te={__name:"RequestItem",props:{item:Object},setup(r){const n=r,o=F({expand:!1}),i={onToggleExpand(){o.expand=!o.expand},onFormatUrl(t){const a=new URL(t);return console.log("_url",a),a.pathname},onCopy(){const t=document.createElement("textarea");t.value=JSON.stringify(n.item,null,2),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),$.success("\u590D\u5236\u6210\u529F")}};return(t,a)=>(p(),m("div",Q,[d("div",Y,[s(u(R),{size:"mini",onClick:i.onToggleExpand},{icon:c(()=>[q(s(u(I),null,null,512),[[C,!o.expand]]),q(s(u(O),null,null,512),[[C,o.expand]])]),_:1},8,["onClick"]),d("div",Z,E(i.onFormatUrl(r.item.url)),1),s(u(R),{size:"mini",type:"primary",onClick:i.onCopy},{default:c(()=>[...a[0]||(a[0]=[f("\u590D\u5236",-1)])]),_:1},8,["onClick"])]),q(d("div",ee,[d("pre",null,E(JSON.stringify(r.item,null,2)),1)],512),[[C,o.expand]])]))}},se=y(te,[["__scopeId","data-v-5a7f617c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestItem.vue"]]);const ne={class:"request-list"},oe={__name:"RequestList",props:{list:Object},setup(r){return(n,o)=>(p(),m("div",ne,[q(s(u(j),{class:"request-list-empty"},null,512),[[C,r.list.length===0]]),(p(!0),m(B,null,V(r.list,i=>(p(),H(se,{item:i},null,8,["item"]))),256))]))}},le=y(oe,[["__scopeId","data-v-46747166"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestList.vue"]]);const re={class:"layout"},ae={__name:"App",setup(r){const n=F({url:"",type:"all"}),o=T([]),i=U(()=>{let e=[...o.value];return n.type!=="all"&&(e=e.filter(l=>l.type===n.type)),e.filter(l=>l.url.includes(n.url))}),t={onClear(){o.value=[]},onAddListener(){chrome.devtools.network.onRequestFinished.addListener(e=>{e.request.method.toUpperCase()!=="OPTIONS"&&e.getContent(l=>{var k;const x=a.parseHandler(l),g=a.parseHandler(((k=e.request.postData)==null?void 0:k.text)||""),v={};e.request.headers.forEach(w=>{v[w.name]=w.value});const _=a.typeHandler(e),h={url:e.request.url,method:e.request.method,headers:v,payload:g,response:x,type:_};o.value.unshift(h)})})}},a={typeHandler(e){var v;const l=e.request.url.split("?")[0].toLowerCase();if([".png",".jpg",".jpeg",".gif",".webp",".svg",".mp4",".mp3",".wav",".js",".css",".html",".htm",".ico",".woff",".woff2",".ttf",".eot"].some(_=>l.endsWith(_)))return"static";const g=e.request.headers.reduce((_,h)=>(_[h.name.toLowerCase()]=h.value,_),{});return((v=g["content-type"])==null?void 0:v.includes("application/json"))||g["x-requested-with"]==="XMLHttpRequest"||["POST","PUT","PATCH"].includes(e.request.method.toUpperCase()),"xhr"},parseHandler(e){if(!e)return"";try{return JSON.parse(e)}catch{return e}}};return t.onAddListener(),(e,l)=>(p(),m("div",re,[s(J),s(K,{filters:n,"onUpdate:filters":l[0]||(l[0]=x=>n=x),onClear:t.onClear},null,8,["filters","onClear"]),s(le,{list:i.value},null,8,["list"])]))}},ue=y(ae,[["__scopeId","data-v-7ba5bd90"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/App.vue"]]);const ie=N(ue);ie.mount("#app");
