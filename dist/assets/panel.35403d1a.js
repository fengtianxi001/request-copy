import"./modulepreload-polyfill.c7c6310f.js";import{o as p,c as m,a as d,d as w,b as I,e as o,w as c,u,B as C,I as D,f as L,g as y,R as b,h as A,r as $,i as h,j as B,v as R,k as O,t as U,M as S,E as j,F as V,l as H,m as F,n as M,p as N,q as T}from"./vendor.fc3c04ff.js";const v=(l,n)=>{const t=l.__vccOpts||l;for(const[a,s]of n)t[a]=s;return t},z={},P={class:"layout-brand"};function J(l,n){return p(),m("div",P,[...n[0]||(n[0]=[d("div",{class:"layout-brand-logo"},"R",-1),d("div",{class:"layout-brand-info"},[d("div",{class:"layout-brand-title"},"Request Copy"),d("div",{class:"layout-brand-version"},"v1.0.0")],-1)])])}const X=v(z,[["render",J],["__scopeId","data-v-4ec73b30"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestBrand.vue"]]);const G={class:"request-filters"},W={class:"request-filters-list"},K={class:"request-filters-input"},Q=w({__name:"RequestFilters",props:{filters:Object},emits:["update:filters","clear","setting"],setup(l,{emit:n}){const t=l,a=n,s=I({get:()=>t.filters,set:i=>a("update:filters",i)});return(i,e)=>(p(),m("div",G,[d("div",W,[o(u(C),{type:"primary",size:"mini",onClick:e[0]||(e[0]=r=>a("setting"))},{icon:c(()=>[o(u(L))]),_:1}),o(u(C),{type:"primary",status:"danger",size:"mini",onClick:e[1]||(e[1]=r=>a("clear"))},{default:c(()=>[...e[4]||(e[4]=[y(" \u6E05\u7A7A ",-1)])]),_:1}),o(u(A),{modelValue:s.value.type,"onUpdate:modelValue":e[2]||(e[2]=r=>s.value.type=r),type:"button",size:"mini"},{default:c(()=>[o(u(b),{value:"all"},{default:c(()=>[...e[5]||(e[5]=[y("All",-1)])]),_:1}),o(u(b),{value:"xhr"},{default:c(()=>[...e[6]||(e[6]=[y("XHR",-1)])]),_:1}),o(u(b),{value:"static"},{default:c(()=>[...e[7]||(e[7]=[y("\u9759\u6001\u8D44\u6E90",-1)])]),_:1})]),_:1},8,["modelValue"])]),d("div",K,[o(u(D),{modelValue:s.value.url,"onUpdate:modelValue":e[3]||(e[3]=r=>s.value.url=r),size:"mini",placeholder:"\u8DEF\u5F84\u8FC7\u6EE4","allow-clear":""},null,8,["modelValue"])])]))}}),Y=v(Q,[["__scopeId","data-v-56e8929c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestFilters.vue"]]);const Z={class:"request-item"},ee={class:"request-item-header"},te={class:"request-item-url"},se={class:"request-item-body"},ne={__name:"RequestItem",props:{item:Object},setup(l){const n=l,t=$({expand:!1}),a={onToggleExpand(){t.expand=!t.expand},onFormatUrl(s){const i=new URL(s);return console.log("_url",i),i.pathname},onCopy(){const s=document.createElement("textarea");s.value=JSON.stringify(n.item,null,2),document.body.appendChild(s),s.select(),document.execCommand("copy"),document.body.removeChild(s),S.success("\u590D\u5236\u6210\u529F")}};return(s,i)=>(p(),m("div",Z,[d("div",ee,[o(u(C),{size:"mini",onClick:a.onToggleExpand},{icon:c(()=>[h(o(u(B),null,null,512),[[R,!t.expand]]),h(o(u(O),null,null,512),[[R,t.expand]])]),_:1},8,["onClick"]),d("div",te,U(a.onFormatUrl(l.item.url)),1),o(u(C),{size:"mini",type:"primary",onClick:a.onCopy},{default:c(()=>[...i[0]||(i[0]=[y("\u590D\u5236",-1)])]),_:1},8,["onClick"])]),h(d("div",se,[d("pre",null,U(JSON.stringify(l.item,null,2)),1)],512),[[R,t.expand]])]))}},oe=v(ne,[["__scopeId","data-v-5a7f617c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestItem.vue"]]);const re={class:"request-list"},le={__name:"RequestList",props:{list:Object},setup(l){return(n,t)=>(p(),m("div",re,[h(o(u(j),{class:"request-list-empty"},null,512),[[R,l.list.length===0]]),(p(!0),m(V,null,H(l.list,a=>(p(),F(oe,{item:a},null,8,["item"]))),256))]))}},ae=v(le,[["__scopeId","data-v-46747166"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestList.vue"]]),ue=w({__name:"RequestSettingModal",setup(l,{expose:n}){const t=ref(!1);return n({...{open(){t.value=!0},onClose(){t.value=!1}}}),(s,i)=>(p(),F(u(M),{title:"\u8BBE\u7F6E"}))}}),ie=v(ue,[["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestSettingModal.vue"]]);const de={class:"layout"},ce={__name:"App",setup(l){const n=$({url:"",type:"all"}),t=N([]),a=I(()=>{let e=[...t.value];return n.type!=="all"&&(e=e.filter(r=>r.type===n.type)),e.filter(r=>r.url.includes(n.url))}),s={onClear(){t.value=[]},onAddListener(){chrome.devtools.network.onRequestFinished.addListener(e=>{e.request.method.toUpperCase()!=="OPTIONS"&&e.getContent(r=>{var k;const x=i.parseHandler(r),g=i.parseHandler(((k=e.request.postData)==null?void 0:k.text)||""),f={};e.request.headers.forEach(E=>{f[E.name]=E.value});const _=i.typeHandler(e),q={url:e.request.url,method:e.request.method,headers:f,payload:g,response:x,type:_};t.value.unshift(q)})})}},i={typeHandler(e){var f;const r=e.request.url.split("?")[0].toLowerCase();if([".png",".jpg",".jpeg",".gif",".webp",".svg",".mp4",".mp3",".wav",".js",".css",".html",".htm",".ico",".woff",".woff2",".ttf",".eot"].some(_=>r.endsWith(_)))return"static";const g=e.request.headers.reduce((_,q)=>(_[q.name.toLowerCase()]=q.value,_),{});return((f=g["content-type"])==null?void 0:f.includes("application/json"))||g["x-requested-with"]==="XMLHttpRequest"||["POST","PUT","PATCH"].includes(e.request.method.toUpperCase()),"xhr"},parseHandler(e){if(!e)return"";try{return JSON.parse(e)}catch{return e}}};return s.onAddListener(),(e,r)=>(p(),m("div",de,[o(X),o(Y,{filters:n,"onUpdate:filters":r[0]||(r[0]=x=>n=x),onClear:s.onClear},null,8,["filters","onClear"]),o(ae,{list:a.value},null,8,["list"]),o(ie)]))}},pe=v(ce,[["__scopeId","data-v-7ba5bd90"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/App.vue"]]);const _e=T(pe);_e.mount("#app");
