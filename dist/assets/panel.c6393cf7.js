import"./modulepreload-polyfill.c7c6310f.js";import{o as _,c as v,a as c,d as S,b as F,e as o,w as p,u as i,B as b,I as D,f as L,g as x,R as k,h as A,r as O,i as R,j as B,v as C,k as j,t as I,M as V,E as H,F as M,l as N,m as $,n as E,p as T,q as z}from"./vendor.d2e1d2a0.js";const f=(r,a)=>{const t=r.__vccOpts||r;for(const[l,n]of a)t[l]=n;return t},P={},J={class:"layout-brand"};function X(r,a){return _(),v("div",J,[...a[0]||(a[0]=[c("div",{class:"layout-brand-logo"},"R",-1),c("div",{class:"layout-brand-info"},[c("div",{class:"layout-brand-title"},"Request Copy"),c("div",{class:"layout-brand-version"},"v1.0.0")],-1)])])}const G=f(P,[["render",X],["__scopeId","data-v-4ec73b30"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestBrand.vue"]]);const W={class:"request-filters"},K={class:"request-filters-list"},Q={class:"request-filters-input"},Y=S({__name:"RequestFilters",props:{filters:Object},emits:["update:filters","clear","setting"],setup(r,{emit:a}){const t=r,l=a,n=F({get:()=>t.filters,set:u=>l("update:filters",u)});return(u,s)=>(_(),v("div",W,[c("div",K,[o(i(b),{type:"primary",size:"mini",onClick:s[0]||(s[0]=e=>l("setting"))},{icon:p(()=>[o(i(L))]),_:1}),o(i(b),{type:"primary",status:"danger",size:"mini",onClick:s[1]||(s[1]=e=>l("clear"))},{default:p(()=>[...s[4]||(s[4]=[x(" \u6E05\u7A7A ",-1)])]),_:1}),o(i(A),{modelValue:n.value.type,"onUpdate:modelValue":s[2]||(s[2]=e=>n.value.type=e),type:"button",size:"mini"},{default:p(()=>[o(i(k),{value:"all"},{default:p(()=>[...s[5]||(s[5]=[x("All",-1)])]),_:1}),o(i(k),{value:"xhr"},{default:p(()=>[...s[6]||(s[6]=[x("XHR",-1)])]),_:1}),o(i(k),{value:"static"},{default:p(()=>[...s[7]||(s[7]=[x("\u9759\u6001\u8D44\u6E90",-1)])]),_:1})]),_:1},8,["modelValue"])]),c("div",Q,[o(i(D),{modelValue:n.value.url,"onUpdate:modelValue":s[3]||(s[3]=e=>n.value.url=e),size:"mini",placeholder:"\u8DEF\u5F84\u8FC7\u6EE4","allow-clear":""},null,8,["modelValue"])])]))}}),Z=f(Y,[["__scopeId","data-v-56e8929c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestFilters.vue"]]);const ee={class:"request-item"},te={class:"request-item-header"},se={class:"request-item-url"},ne={class:"request-item-body"},oe={__name:"RequestItem",props:{item:Object},setup(r){const a=r,t=O({expand:!1}),l={onToggleExpand(){t.expand=!t.expand},onFormatUrl(n){const u=new URL(n);return console.log("_url",u),u.pathname},onCopy(){const n=document.createElement("textarea");n.value=JSON.stringify(a.item,null,2),document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),V.success("\u590D\u5236\u6210\u529F")}};return(n,u)=>(_(),v("div",ee,[c("div",te,[o(i(b),{size:"mini",onClick:l.onToggleExpand},{icon:p(()=>[R(o(i(B),null,null,512),[[C,!t.expand]]),R(o(i(j),null,null,512),[[C,t.expand]])]),_:1},8,["onClick"]),c("div",se,I(l.onFormatUrl(r.item.url)),1),o(i(b),{size:"mini",type:"primary",onClick:l.onCopy},{default:p(()=>[...u[0]||(u[0]=[x("\u590D\u5236",-1)])]),_:1},8,["onClick"])]),R(c("div",ne,[c("pre",null,I(JSON.stringify(r.item,null,2)),1)],512),[[C,t.expand]])]))}},le=f(oe,[["__scopeId","data-v-5a7f617c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestItem.vue"]]);const re={class:"request-list"},ae={__name:"RequestList",props:{list:Object},setup(r){return(a,t)=>(_(),v("div",re,[R(o(i(H),{class:"request-list-empty"},null,512),[[C,r.list.length===0]]),(_(!0),v(M,null,N(r.list,l=>(_(),$(le,{item:l},null,8,["item"]))),256))]))}},ie=f(ae,[["__scopeId","data-v-46747166"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestList.vue"]]),ue=S({__name:"RequestSettingModal",setup(r,{expose:a}){const t=E(!1);return a({...{onOpen(){t.value=!0},onClose(){t.value=!1}}}),(n,u)=>(_(),$(i(T),{title:"\u8BBE\u7F6E"}))}}),de=f(ue,[["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestSettingModal.vue"]]);const ce={class:"layout"},pe={__name:"App",setup(r){const a=E(null),t=O({url:"",type:"all"}),l=E([]),n=F(()=>{let e=[...l.value];return t.type!=="all"&&(e=e.filter(d=>d.type===t.type)),e.filter(d=>d.url.includes(t.url))}),u={onClear(){l.value=[]},onAddListener(){chrome.devtools.network.onRequestFinished.addListener(e=>{e.request.method.toUpperCase()!=="OPTIONS"&&e.getContent(d=>{var U;const g=s.parseHandler(d),q=s.parseHandler(((U=e.request.postData)==null?void 0:U.text)||""),y={};e.request.headers.forEach(w=>{y[w.name]=w.value});const m=s.typeHandler(e),h={url:e.request.url,method:e.request.method,headers:y,payload:q,response:g,type:m};l.value.unshift(h)})})},onSetting(){var e;(e=a.value)==null||e.onOpen()}},s={typeHandler(e){var y;const d=e.request.url.split("?")[0].toLowerCase();if([".png",".jpg",".jpeg",".gif",".webp",".svg",".mp4",".mp3",".wav",".js",".css",".html",".htm",".ico",".woff",".woff2",".ttf",".eot"].some(m=>d.endsWith(m)))return"static";const q=e.request.headers.reduce((m,h)=>(m[h.name.toLowerCase()]=h.value,m),{});return((y=q["content-type"])==null?void 0:y.includes("application/json"))||q["x-requested-with"]==="XMLHttpRequest"||["POST","PUT","PATCH"].includes(e.request.method.toUpperCase()),"xhr"},parseHandler(e){if(!e)return"";try{return JSON.parse(e)}catch{return e}}};return u.onAddListener(),(e,d)=>(_(),v("div",ce,[o(G),o(Z,{filters:t,"onUpdate:filters":d[0]||(d[0]=g=>t=g),onClear:u.onClear,onSetting:u.onSetting},null,8,["filters","onClear","onSetting"]),o(ie,{list:n.value},null,8,["list"]),o(de,{ref_key:"modal",ref:a},null,512)]))}},_e=f(pe,[["__scopeId","data-v-7ba5bd90"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/App.vue"]]);const me=z(_e);me.mount("#app");
