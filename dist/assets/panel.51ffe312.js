import"./modulepreload-polyfill.c7c6310f.js";import{o as p,c as m,a as d,d as F,b as E,e as r,w as c,u as i,B as b,I as L,f,R as q,g as A,r as I,h as R,i as D,v as C,j as O,t as U,M as $,E as j,F as B,k as V,l as H,m as N,n as S}from"./vendor.a2bebc5a.js";const y=(a,s)=>{const n=a.__vccOpts||a;for(const[l,t]of s)n[l]=t;return n},T={},z={class:"layout-brand"};function P(a,s){return p(),m("div",z,[...s[0]||(s[0]=[d("div",{class:"layout-brand-logo"},"R",-1),d("div",{class:"layout-brand-info"},[d("div",{class:"layout-brand-title"},"Request Copy"),d("div",{class:"layout-brand-version"},"v1.0.0")],-1)])])}const J=y(T,[["render",P],["__scopeId","data-v-4ec73b30"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestBrand.vue"]]);const M={class:"request-filters"},X={class:"request-filters-list"},G={class:"request-filters-input"},W=F({__name:"RequestFilters",props:{filters:Object},emits:["update:filters","clear"],setup(a,{emit:s}){const n=a,l=s,t=E({get:()=>n.filters,set:u=>l("update:filters",u)});return(u,e)=>(p(),m("div",M,[d("div",X,[r(i(b),{size:"mini",onClick:e[0]||(e[0]=o=>l("clear"))},{default:c(()=>[...e[3]||(e[3]=[f("\u6E05\u7A7A\u6240\u6709",-1)])]),_:1}),r(i(A),{modelValue:t.value.type,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.type=o),type:"button",size:"mini"},{default:c(()=>[r(i(q),{value:"all"},{default:c(()=>[...e[4]||(e[4]=[f("All",-1)])]),_:1}),r(i(q),{value:"xhr"},{default:c(()=>[...e[5]||(e[5]=[f("XHR",-1)])]),_:1}),r(i(q),{value:"static"},{default:c(()=>[...e[6]||(e[6]=[f("\u9759\u6001\u8D44\u6E90",-1)])]),_:1})]),_:1},8,["modelValue"])]),d("div",G,[r(i(L),{modelValue:t.value.url,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.url=o),size:"mini",placeholder:"\u8DEF\u5F84\u8FC7\u6EE4","allow-clear":""},null,8,["modelValue"])])]))}}),K=y(W,[["__scopeId","data-v-56e8929c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestFilters.vue"]]);const Q={class:"request-item"},Y={class:"request-item-header"},Z={class:"request-item-url"},ee={class:"request-item-body"},te={__name:"RequestItem",props:{item:Object},setup(a){const s=a,n=I({expand:!1}),l={onToggleExpand(){n.expand=!n.expand},onFormatUrl(t){const u=new URL(t);return console.log("_url",u),u.pathname},onCopy(){const t=document.createElement("textarea");t.value=JSON.stringify(s.item,null,2),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),$.success("\u590D\u5236\u6210\u529F")}};return(t,u)=>(p(),m("div",Q,[d("div",Y,[r(i(b),{size:"mini",onClick:l.onToggleExpand},{icon:c(()=>[R(r(i(D),null,null,512),[[C,!n.expand]]),R(r(i(O),null,null,512),[[C,n.expand]])]),_:1},8,["onClick"]),d("div",Z,U(l.onFormatUrl(a.item.url)),1),r(i(b),{size:"mini",type:"primary",onClick:l.onCopy},{default:c(()=>[...u[0]||(u[0]=[f("\u590D\u5236",-1)])]),_:1},8,["onClick"])]),R(d("div",ee,[d("pre",null,U(JSON.stringify(a.item,null,2)),1)],512),[[C,n.expand]])]))}},se=y(te,[["__scopeId","data-v-5a7f617c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestItem.vue"]]);const ne={class:"request-list"},oe={__name:"RequestList",props:{list:Object},setup(a){return(s,n)=>(p(),m("div",ne,[r(i(j)),(p(!0),m(B,null,V(a.list,l=>(p(),H(se,{item:l},null,8,["item"]))),256))]))}},re=y(oe,[["__scopeId","data-v-46747166"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestList.vue"]]);const ae={class:"layout"},le={__name:"App",setup(a){const s=I({url:"",type:"all"}),n=N([]),l=E(()=>{let e=[...n.value];return s.type!=="all"&&(e=e.filter(o=>o.type===s.type)),e.filter(o=>o.url.includes(s.url))}),t={onClear(){n.value=[]},onAddListener(){chrome.devtools.network.onRequestFinished.addListener(e=>{e.request.method.toUpperCase()!=="OPTIONS"&&e.getContent(o=>{var k;const x=u.parseHandler(o),g=u.parseHandler(((k=e.request.postData)==null?void 0:k.text)||""),v={};e.request.headers.forEach(w=>{v[w.name]=w.value});const _=u.typeHandler(e),h={url:e.request.url,method:e.request.method,headers:v,payload:g,response:x,type:_};n.value.unshift(h)})})}},u={typeHandler(e){var v;const o=e.request.url.split("?")[0].toLowerCase();if([".png",".jpg",".jpeg",".gif",".webp",".svg",".mp4",".mp3",".wav",".js",".css",".html",".htm",".ico",".woff",".woff2",".ttf",".eot"].some(_=>o.endsWith(_)))return"static";const g=e.request.headers.reduce((_,h)=>(_[h.name.toLowerCase()]=h.value,_),{});return((v=g["content-type"])==null?void 0:v.includes("application/json"))||g["x-requested-with"]==="XMLHttpRequest"||["POST","PUT","PATCH"].includes(e.request.method.toUpperCase()),"xhr"},parseHandler(e){if(!e)return"";try{return JSON.parse(e)}catch{return e}}};return t.onAddListener(),(e,o)=>(p(),m("div",ae,[r(J),r(K,{filters:s,"onUpdate:filters":o[0]||(o[0]=x=>s=x),onClear:t.onClear},null,8,["filters","onClear"]),r(re,{list:l.value},null,8,["list"])]))}},ue=y(le,[["__scopeId","data-v-7ba5bd90"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/App.vue"]]);const ie=S(ue);ie.mount("#app");
