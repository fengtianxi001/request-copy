import"./modulepreload-polyfill.c7c6310f.js";import{o as p,c as m,a as d,d as F,b as I,e as r,w as c,u as i,B as b,I as L,f,R as q,g as A,r as E,h as R,i as D,v as C,j as O,t as U,M as $,F as j,k as B,l as V,m as H,n as N}from"./vendor.d25fdfe8.js";const y=(l,s)=>{const n=l.__vccOpts||l;for(const[a,t]of s)n[a]=t;return n},S={},T={class:"layout-brand"};function z(l,s){return p(),m("div",T,[...s[0]||(s[0]=[d("div",{class:"layout-brand-logo"},"R",-1),d("div",{class:"layout-brand-info"},[d("div",{class:"layout-brand-title"},"Request Copy"),d("div",{class:"layout-brand-version"},"v1.0.0")],-1)])])}const P=y(S,[["render",z],["__scopeId","data-v-4ec73b30"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestBrand.vue"]]);const J={class:"request-filters"},M={class:"request-filters-list"},X={class:"request-filters-input"},G=F({__name:"RequestFilters",props:{filters:Object},emits:["update:filters","clear"],setup(l,{emit:s}){const n=l,a=s,t=I({get:()=>n.filters,set:u=>a("update:filters",u)});return(u,e)=>(p(),m("div",J,[d("div",M,[r(i(b),{size:"mini",onClick:e[0]||(e[0]=o=>a("clear"))},{default:c(()=>[...e[3]||(e[3]=[f("\u6E05\u7A7A\u6240\u6709",-1)])]),_:1}),r(i(A),{modelValue:t.value.type,"onUpdate:modelValue":e[1]||(e[1]=o=>t.value.type=o),type:"button",size:"mini"},{default:c(()=>[r(i(q),{value:"all"},{default:c(()=>[...e[4]||(e[4]=[f("All",-1)])]),_:1}),r(i(q),{value:"xhr"},{default:c(()=>[...e[5]||(e[5]=[f("XHR",-1)])]),_:1}),r(i(q),{value:"static"},{default:c(()=>[...e[6]||(e[6]=[f("\u9759\u6001\u8D44\u6E90",-1)])]),_:1})]),_:1},8,["modelValue"])]),d("div",X,[r(i(L),{modelValue:t.value.url,"onUpdate:modelValue":e[2]||(e[2]=o=>t.value.url=o),size:"mini",placeholder:"\u8DEF\u5F84\u8FC7\u6EE4","allow-clear":""},null,8,["modelValue"])])]))}}),W=y(G,[["__scopeId","data-v-56e8929c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestFilters.vue"]]);const K={class:"request-item"},Q={class:"request-item-header"},Y={class:"request-item-url"},Z={class:"request-item-body"},ee={__name:"RequestItem",props:{item:Object},setup(l){const s=l,n=E({expand:!1}),a={onToggleExpand(){n.expand=!n.expand},onFormatUrl(t){const u=new URL(t);return console.log("_url",u),u.pathname},onCopy(){const t=document.createElement("textarea");t.value=JSON.stringify(s.item,null,2),document.body.appendChild(t),t.select(),document.execCommand("copy"),document.body.removeChild(t),$.success("\u590D\u5236\u6210\u529F")}};return(t,u)=>(p(),m("div",K,[d("div",Q,[r(i(b),{size:"mini",onClick:a.onToggleExpand},{icon:c(()=>[R(r(i(D),null,null,512),[[C,!n.expand]]),R(r(i(O),null,null,512),[[C,n.expand]])]),_:1},8,["onClick"]),d("div",Y,U(a.onFormatUrl(l.item.url)),1),r(i(b),{size:"mini",type:"primary",onClick:a.onCopy},{default:c(()=>[...u[0]||(u[0]=[f("\u590D\u5236",-1)])]),_:1},8,["onClick"])]),R(d("div",Z,[d("pre",null,U(JSON.stringify(l.item,null,2)),1)],512),[[C,n.expand]])]))}},te=y(ee,[["__scopeId","data-v-5a7f617c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestItem.vue"]]);const se={class:"request-list"},ne={__name:"RequestList",props:{list:Object},setup(l){return(s,n)=>(p(),m("div",se,[(p(!0),m(j,null,B(l.list,a=>(p(),V(te,{item:a},null,8,["item"]))),256))]))}},oe=y(ne,[["__scopeId","data-v-46747166"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestList.vue"]]);const re={class:"layout"},le={__name:"App",setup(l){const s=E({url:"",type:"all"}),n=H([]),a=I(()=>{let e=[...n.value];return s.type!=="all"&&(e=e.filter(o=>o.type===s.type)),e.filter(o=>o.url.includes(s.url))}),t={onClear(){n.value=[]},onAddListener(){chrome.devtools.network.onRequestFinished.addListener(e=>{e.request.method.toUpperCase()!=="OPTIONS"&&e.getContent(o=>{var k;const x=u.parseHandler(o),g=u.parseHandler(((k=e.request.postData)==null?void 0:k.text)||""),v={};e.request.headers.forEach(w=>{v[w.name]=w.value});const _=u.typeHandler(e),h={url:e.request.url,method:e.request.method,headers:v,payload:g,response:x,type:_};n.value.unshift(h)})})}},u={typeHandler(e){var v;const o=e.request.url.split("?")[0].toLowerCase();if([".png",".jpg",".jpeg",".gif",".webp",".svg",".mp4",".mp3",".wav",".js",".css",".html",".htm",".ico",".woff",".woff2",".ttf",".eot"].some(_=>o.endsWith(_)))return"static";const g=e.request.headers.reduce((_,h)=>(_[h.name.toLowerCase()]=h.value,_),{});return((v=g["content-type"])==null?void 0:v.includes("application/json"))||g["x-requested-with"]==="XMLHttpRequest"||["POST","PUT","PATCH"].includes(e.request.method.toUpperCase()),"xhr"},parseHandler(e){if(!e)return"";try{return JSON.parse(e)}catch{return e}}};return t.onAddListener(),(e,o)=>(p(),m("div",re,[r(P),r(W,{filters:s,"onUpdate:filters":o[0]||(o[0]=x=>s=x),onClear:t.onClear},null,8,["filters","onClear"]),r(oe,{list:a.value},null,8,["list"])]))}},ae=y(le,[["__scopeId","data-v-7ba5bd90"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/App.vue"]]);const ue=N(ae);ue.mount("#app");
