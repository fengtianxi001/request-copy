import"./modulepreload-polyfill.c7c6310f.js";import{o as _,c as v,a as c,d as O,b as S,e as l,w as p,u,B as b,I as D,f as L,g as x,R as k,h as A,r as F,i as R,j as B,v as h,k as j,t as I,M as V,E as H,F as M,l as N,m as $,n as U,p as T,q as z}from"./vendor.d2e1d2a0.js";const f=(r,i)=>{const t=r.__vccOpts||r;for(const[n,o]of i)t[n]=o;return t},P={},J={class:"layout-brand"};function X(r,i){return _(),v("div",J,[...i[0]||(i[0]=[c("div",{class:"layout-brand-logo"},"R",-1),c("div",{class:"layout-brand-info"},[c("div",{class:"layout-brand-title"},"Request Copy"),c("div",{class:"layout-brand-version"},"v1.0.0")],-1)])])}const G=f(P,[["render",X],["__scopeId","data-v-4ec73b30"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestBrand.vue"]]);const W={class:"request-filters"},K={class:"request-filters-list"},Q={class:"request-filters-input"},Y=O({__name:"RequestFilters",props:{filters:Object},emits:["update:filters","clear","setting"],setup(r,{emit:i}){const t=r,n=i,o=S({get:()=>t.filters,set:a=>n("update:filters",a)});return(a,s)=>(_(),v("div",W,[c("div",K,[l(u(b),{type:"primary",size:"mini",onClick:s[0]||(s[0]=e=>n("setting"))},{icon:p(()=>[l(u(L))]),_:1}),l(u(b),{type:"primary",status:"danger",size:"mini",onClick:s[1]||(s[1]=e=>n("clear"))},{default:p(()=>[...s[4]||(s[4]=[x(" \u6E05\u7A7A ",-1)])]),_:1}),l(u(A),{modelValue:o.value.type,"onUpdate:modelValue":s[2]||(s[2]=e=>o.value.type=e),type:"button",size:"mini"},{default:p(()=>[l(u(k),{value:"all"},{default:p(()=>[...s[5]||(s[5]=[x("All",-1)])]),_:1}),l(u(k),{value:"xhr"},{default:p(()=>[...s[6]||(s[6]=[x("XHR",-1)])]),_:1}),l(u(k),{value:"static"},{default:p(()=>[...s[7]||(s[7]=[x("\u9759\u6001\u8D44\u6E90",-1)])]),_:1})]),_:1},8,["modelValue"])]),c("div",Q,[l(u(D),{modelValue:o.value.url,"onUpdate:modelValue":s[3]||(s[3]=e=>o.value.url=e),size:"mini",placeholder:"\u8DEF\u5F84\u8FC7\u6EE4","allow-clear":""},null,8,["modelValue"])])]))}}),Z=f(Y,[["__scopeId","data-v-56e8929c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestFilters.vue"]]);const ee={class:"request-item"},te={class:"request-item-header"},se={class:"request-item-url"},ne={class:"request-item-body"},oe={__name:"RequestItem",props:{item:Object},setup(r){const i=r,t=F({expand:!1}),n={onToggleExpand(){t.expand=!t.expand},onFormatUrl(o){const a=new URL(o);return console.log("_url",a),a.pathname},onCopy(){const o=document.createElement("textarea");o.value=JSON.stringify(i.item,null,2),document.body.appendChild(o),o.select(),document.execCommand("copy"),document.body.removeChild(o),V.success("\u590D\u5236\u6210\u529F")}};return(o,a)=>(_(),v("div",ee,[c("div",te,[l(u(b),{size:"mini",onClick:n.onToggleExpand},{icon:p(()=>[R(l(u(B),null,null,512),[[h,!t.expand]]),R(l(u(j),null,null,512),[[h,t.expand]])]),_:1},8,["onClick"]),c("div",se,I(n.onFormatUrl(r.item.url)),1),l(u(b),{size:"mini",type:"primary",onClick:n.onCopy},{default:p(()=>[...a[0]||(a[0]=[x("\u590D\u5236",-1)])]),_:1},8,["onClick"])]),R(c("div",ne,[c("pre",null,I(JSON.stringify(r.item,null,2)),1)],512),[[h,t.expand]])]))}},le=f(oe,[["__scopeId","data-v-5a7f617c"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestItem.vue"]]);const ae={class:"request-list"},re={__name:"RequestList",props:{list:Object},setup(r){return(i,t)=>(_(),v("div",ae,[R(l(u(H),{class:"request-list-empty"},null,512),[[h,r.list.length===0]]),(_(!0),v(M,null,N(r.list,n=>(_(),$(le,{item:n},null,8,["item"]))),256))]))}},ie=f(re,[["__scopeId","data-v-46747166"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestList.vue"]]),ue=O({__name:"RequestSettingModal",setup(r,{expose:i}){const t=U(!1),n={onOpen(){t.value=!0},onClose(){t.value=!1}};return i({onOpen:n.onOpen,onClose:n.onClose}),(o,a)=>(_(),$(u(T),{width:300,visible:t.value,"onUpdate:visible":a[0]||(a[0]=s=>t.value=s),title:"\u8BBE\u7F6E"},null,8,["visible"]))}}),de=f(ue,[["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/components/RequestSettingModal.vue"]]);const ce={class:"layout"},pe={__name:"App",setup(r){const i=U(null),t=F({url:"",type:"all"}),n=U([]),o=S(()=>{let e=[...n.value];return t.type!=="all"&&(e=e.filter(d=>d.type===t.type)),e.filter(d=>d.url.includes(t.url))}),a={onClear(){n.value=[]},onAddListener(){chrome.devtools.network.onRequestFinished.addListener(e=>{e.request.method.toUpperCase()!=="OPTIONS"&&e.getContent(d=>{var w;const g=s.parseHandler(d),q=s.parseHandler(((w=e.request.postData)==null?void 0:w.text)||""),y={};e.request.headers.forEach(E=>{y[E.name]=E.value});const m=s.typeHandler(e),C={url:e.request.url,method:e.request.method,headers:y,payload:q,response:g,type:m};n.value.unshift(C)})})},onSetting(){console.log("modal",i.value.onOpen())}},s={typeHandler(e){var y;const d=e.request.url.split("?")[0].toLowerCase();if([".png",".jpg",".jpeg",".gif",".webp",".svg",".mp4",".mp3",".wav",".js",".css",".html",".htm",".ico",".woff",".woff2",".ttf",".eot"].some(m=>d.endsWith(m)))return"static";const q=e.request.headers.reduce((m,C)=>(m[C.name.toLowerCase()]=C.value,m),{});return((y=q["content-type"])==null?void 0:y.includes("application/json"))||q["x-requested-with"]==="XMLHttpRequest"||["POST","PUT","PATCH"].includes(e.request.method.toUpperCase()),"xhr"},parseHandler(e){if(!e)return"";try{return JSON.parse(e)}catch{return e}}};return a.onAddListener(),(e,d)=>(_(),v("div",ce,[l(G),l(Z,{filters:t,"onUpdate:filters":d[0]||(d[0]=g=>t=g),onClear:a.onClear,onSetting:a.onSetting},null,8,["filters","onClear","onSetting"]),l(ie,{list:o.value},null,8,["list"]),l(de,{ref_key:"modal",ref:i},null,512)]))}},_e=f(pe,[["__scopeId","data-v-7ba5bd90"],["__file","/Users/fengtianxi001/Desktop/crx-devtools/src/App.vue"]]);const me=z(_e);me.mount("#app");
